\chapter{Unidad II}
\section{Modelo OSI}
Pensemos en administración en la integración de varios elementos para manejar de forma eficiente y eficaz el manejar las edes de computadoras.

\begin{itemize}
    \item {Administrar: planificación de la mejor manera para una mejor gestión de la red-}
    \item {Gestionar: implementación de modificaciones y crreccionaes para alcanzar los objetivos de la red}
\end{itemize}

\subsubsection{Administración de sistemas}
Suma total de las políticas y procedimientos que intervienen en la configuración, control y monitoreo que conforman una red, con el fin de aseurar el eficiente y efectivo empleo de sus recursos. \\\\

Se le solicita a la ISO que diseñe un modelo de administración OSI 

\subsubsection{Modelo de administración OSI}

La Organización de Estándares INternacionales creó una comisión para crear un modelo de administración de redes, bajo la dirección del grupo OSI.

Surge como un modelo que involucra tanto la PC como la red, buscando una coordinación e integración entre si aún que se traten de modleos distintos.

\subsubsection{Modelo de administración de redes OSI (OSI-NMM)}
Es un modelo estándar que proporciona el marco conceptual para la organización de una amplia gama de recursos de la red.\\\\
Planificación de la capacidad de red\\\\
Gestión del rendimiento de la red\\

Comprende la administración de sistemas que delimita la operación de cualquiera de las 7 capas del modelo OSI, y la administración de los objetos gestionados,
Plantea los modelos de:
\begin{itemize}
    \item Organización
    \item Información
    \item Comunicación
    \item Función
\end{itemize}

\subsubsection{Modelo organizacional}
Describe lso componentes de la administración de redes tales como administrador, agente y otros, y sus interrelaciones.
Sus relaciones vienen dadas por la arquitectura de red.\\\\
El modelo organizacional del modelo OSI define los bloques y la relación entre estos.\\\\

Es una estructura dividida en dominios de red, los cuales comprenden su operabilidad y ofrece soporte de los aspectos de gestión del mismo.\\\\
Define conceptos para una gestión cooperativa, como para una gestión basada en jerarquías:
\begin{itemize}
    \item COncepto simétrico - entre dominios
    \item Concepto asimétrico - entre dominios y subdominios
\end{itemize}

\paragraph{Dominio ejemplo}
www.ipn.mx \\
\textbf{www.escom.ipn.mx}\\
\textbf{www.saes.escom.ipn.mx}
Dónde el tercer y segundo ejemplo son subdiminios del primero 
\subsubsection{Gestión de dominios}
Define la división de entorno, teniendo en cuenta dos moibos principales:
\begin{itemize}
    \item {Políticas funcionales, donde se incluyen políticas de seguridad contabilidad etc}
    \item {Políticas no funcionales, como la gestión geográfica, tecnologías, etc}
\end{itemize}
\subsubsection{Sub modelo informativo}
Trata de la estructura y almacenamiento de la información relativa a la administración de la red \\\\
Esta información se guarda en una base de datos la cual recube nombre de base de datos de información de administración \textbf{(MIB)} Es un archivo que guarda información sobre nuestras redes, el cual se encuentra en todas las capas de administración.
\subsubsection{Sub modelo conunicacional}
Habla de la forma como se comunican los datos de administración en el proceso gestir-agente\\\\
Atiende lo relacionado con el protocolo de transporte, el protocolo de aplicaciones y los comandos y respuestas entre pares. (Como me comunico, como lo hago, formato de mis tramas, que protocolos usaré, etc.)

\subsubsection{Modelo funcional}
Divide la complejidad de la administración en áreas funcionales de administración e intenta especificar funciones de administración genéricas.\\\\
EL modelo funcional proporciona las bases para construir librerías y soluciones.\\\\
áreas de administración del modelo OSI
\begin{itemize}
    \item {Administración de fallas (fault management)}
    \item {Administracion de configuración (configuration management)}
    \item {Administración de estadísticas y contabilidad (accounting amanager) [Comportamiento de la red y si todo está dentro de los rangos permitidos, además de saber cuanto se va a cobrar]}
    \item {Administración de desempeño (performance management) [Que todo este funcionando bien, saber si es posible hacer mejoras, etc.]}
    \item {Administración de seguridad (security management) [Quién tiene acceso a que si quien trata de accesar tiene permisos, etc]}
\end{itemize}

\subsection{CMIS (Servicios de interopabilidad de gestión de contenidos)}
Es un estándar, solo sabemos que cosas debe hacer. CMIS permite la interoperabilidad entre los distintos servicios que tenemos, el gestor hace pull-in y recaba información de todos los agentes.

\textbf{T-1.1 Levantar la siguiente topología GNS3 192.168.0.0/24: Bajar las ISOS router3600, Switch3600 crear dos máquinas virtuales basadas en linux. }
\begin{lstlisting}
    enable
    conf 
    configure ter 
    configure terminal 
    inte
    interface e 
    ip add 
    ip address
    ip address 192.268.0.1 255.255.255.128
    no shutdown
    e
    exit
    inte e 0/1
    ip address  
\end{lstlisting}

\section{CMIS (Servicio de interoperabilidad de gestión de contenidos)}
Surge como un impulso de varias instituciones privadas.\\\\

Estandar abierto de OASIS diseñado para la interoprabilidad de lso sistemas de gestión de contenidos a través d einternet\\

A través d euna capa de abstración permite la gestión de contenidos.\\\\

\subsection{Sistema de gestión de contenidos o CMS}
Podemos hacer una analogía con el periódico, antes si se compraba un periódico a cualquier hora del día tenías la misma información, hoy en día tienes información en tiempo real, además de tener aglomeradas varias fuentes. CMS funciona de esta manera, un manejo dinámico de la información.\\

Aplicación que explota un entorno de trabajo para la creación y administración de contenidos.

Se usa intensamente en páginas web.

Usa una o varias bases de datos para alojar el contenido del sitio web.

Permite manejar de forma independiente el contenido y el diseño.

\subsection{Objetivos}

CMIS fué diseñado para majorar los sitemas de administración de contenido empresarial que existen junto con sus interfaces de aplicación actual junto con una capa de abstracción que nos permite homogeneizar la información.

\subsection{Historia}
EMC, IBM y Microsoft propusieron este formato.

Las tres empresas enviaron de forma conjunta CMIS a OASIS. Esta propuesta fue aprobada en 2010 y tuvo una actualizació en 2012. 

\subsection{Definiciones}
\begin{itemize}
    \item Modelo de dominio
    \item Enlaces de servicios web
    \item Rest ful y AtomPub: Difusión web usando XML y un protocolo simple basado en HTTP
\end{itemize}

\subsection{ Enfoque de CMIS }
CMIS se enfoca en las capacidades de contenido básico d eun sistema de administración de contenido empresarial, las cuales son la \textbf{creación, lectura, escritura, borrar y funciones de petición} todo se maneja jerarquicamente como un árbol. 

\subsection{Alcances CMIS}
CMIS incorpora conceptos contemporáneos de una orientación de servicios web y especificaciones ambas basadas en SOAP y REST (Estos últimos nos permiten tener una interoperabilidad entre objetos). 

\subsection{CMIS}
Los trabajadores pueden usar una única aplicación para acceder e intercambiar contenido que esta almacenado en varios sistemas de gestión empresarial sin importar que sean diferentes las computadoras.

\subsubsection{Otros estándares}
\begin{itemize}
    \item JCR Java Content Repository (Bastante complicado de utilizar)
    \item WebDAV (Muy jóven)
\end{itemize}

\subsection{Funciones genéricas de CMIS}
Crear, acceder a versiones de documentos y crear, leer actualizar, relacionar y borrar obketos

\subsection{Object identity ODI}
En el momento que se crea un objeto se crea un OID el cual es intransfereible (como una primary key de un objeto).

\subsubsection{Jerarquía de documentos}
Se usan folders y usa unaestructura de árbol normal, se manejan archivos completos y sin flujo de contenidos
'\subsection{CRUD}
\begin{itemize}
    \item Creación
    \item Recuperación
    \item Actualización
    \item Eliminación
\end{itemize}

\section{CMIP}
CMIS es un protocolo!, no nos dice como hacer las cosas solo como deben hacerse las cosas.  Desarrollado por la ISO, ofrece un mecanismo de transporte en la forma de servicio pregunta-respuesta para las 7 capas del modelo OSI. Imaginemos que tenemos una PC que ejecuta un software de administración de servicios y diversos dispositivos de red (Switch, routers, PC, etc) en cada uno de esos dispositios está en ejecución un pequeño programa llamado agente, mientras que en en la PC que tiene el software de administración de servicios tenemos el gestor. El gestor usando pull-in hace preguntas a los agentes (Dame información en el MIB (Base de Información de Administración), el agente responde). El recaba información, realiza estadisticas etc. Posteriormente el gestor envia una respuesta con el fin de ajustar algo en los agentes. Finalmente los dispositivos de red responden si se ha hecho lo que el gestor ha pedido.\\\\

Es considerada como parte d euna arquitectura de administración de red, que provee mecanismos de intercambio de información, entre un administrador y elementos remotos de red, cuyo funcionamiento está basado en los servicios CMIP.\\\\

Los sistemas de administración de red, basados en CMIP son utilizados en la administración de:

\begin{itemize}
    \item Redes de área local, LAN.
    \item Redes corporativas y provadas de área amplia.
    \item Redes nacionales e internacionales.
\end{itemize}

Define la información en términos de objetos administrados.

Permite su modificación y acciones sobre archivos

\subsection{Sistemas de administración de red o NMS}
Es un conjunto de aplicaciones que supervisan y controlan los dispositivos administrados.

Proporcionan el volumen de recursos de procesamiento y memoria requeridos para la administración de la red.

Uno o más NMS deben existir en cualquier red.

\subsection{Unidad de datos de protocolo de aplicación}
Las tramas que utiliza CMIP para su funcionamiento

\subsection{Caracteristicas del protocolo}
\begin{itemize}
    \item Ocupa muchos recursos
    \item Tramas muy grandes
    \item Peticiones muy complicadas de realizar
\end{itemize}

\subsection{Protocolos del CMIP}
ACSE, ROSE, CMISE

\chapter{Configuración básica de R1 y Routers}
\section{Conexiones a la interfaz de comandos}
\begin{itemize}
    \item {Terminal de consola: podemos hacerlo de forma local}
    \item {Telnet/SSH: nuestro propia red de internet (La primera es sin protección la otra de forma segura)}
\end{itemize}
\section{Acceso a la interfaz de comando CLI.}
Interfaz de Línea de Comandos. Requerimos cuenta de usuario. La consola muestra algo más o menos así.

\begin{lstlisting}
    dispositivo:ruta>comando                \\Switch
    dispositivo:ruta#comando                \\Router
    dispositivo:ruta(enable)#comando      
    dispositivo:ruta(config)a#comando
    dispositivo:ruta(config-vlan)#comando
    dispositivo:ruta(config-it)#comando
\end{lstlisting}
Si en el prompt tenemos el símbolo $>$ estamos en modo switch y en modo router tenemos otro símbolo el cual provee más permisos, tenemos modo de privilegio y finalmente configuración específica.\\\\

Podemos tener del 0 - 15 modelos de dispositivo, en los dispositivos CISCO hay 0, 1 y 15. Podemos definir el medio y asignar diverss permisos o comandos de ejecucion generando nuevos grupos.

\subsection{Modos de acceso}
\begin{itemize}
    \item {Solo lectura: show}
    \item {Lectura-escritura: set show}
\end{itemize}

\subsection{USAMOS GNS3}
\begin{itemize}
    \item {1. crear proyecto nuevo}
    \item {2. Cuantas direcciones IP requiero para una comunicación troncal? Requiero dos, pero también la IP y dirección de broadcast, además la máscara es decir 10.10.0.0/30, }
\end{itemize}
Configuramos Router 1 abriendo consola:
\begin{lstlisting}
    R1#disable
    R1>enable 
    R1# ?               //Comandos a ejecutar
    R1# c?              //Comandos que inician con c
    R1# configure?      //'comandos' del comando
    R1# conf terminal          //configurar terminal 
    R1(config)#interface et
    R1(config)#interface ethernet 0/1
    R1(config-if)#ip a
    R1(config-if)#ip add
    R1(config-if)#ip address 192.168.0.1 255.255.255.0
    R1(config-if)#no shutdown
    R1(config-if)#exit 
    R1(config)# inter e0/0      //Segundo router
    R1(config-if)#ip add 
    R1(config-if)#ip address 10.10.0.0 255.255.255.252
    R1(config-if)#no shut 
    R1(config-if)#exit
    R1(config)#
\end{lstlisting}

Virtual PC
\begin{lstlisting}
    PC-1> ip ? // que podemos hacer 
    PC-1> ip address ip 192.168.0.2 24 192.168.0.1
    PC-1> ping 192.168.0.1
\end{lstlisting}

\begin{lstlisting}
    R1#show ip address brief
\end{lstlisting}

\begin{lstlisting}
    R1#show ip route    //Tabla de enrutamiento (Hasta a donde llega mi router)
\end{lstlisting}

Algunos comandos simples
\begin{lstlisting}
    R1#conf t
    R1(config)#prompt "Curso4CM1"
\end{lstlisting}
\begin{lstlisting}
    R1#conf t 
    R1(config)#host name "Curso4CM1"
    Curso4CM1#
\end{lstlisting}
Usando password
\begin{lstlisting}
    R1#conf t
    R1(config)#enable password 1234
    R1(config)#end 
    R1#disable 
    R1>enable //Ahora pedirá password
\end{lstlisting}

\begin{lstlisting}
    R1#show running-config //Configuración y comandos que debo ejecutar
\end{lstlisting}

\begin{lstlisting}
    R1#show running-config | include pass //Mostrar el password
\end{lstlisting}

Contraseña segura
\begin{lstlisting}
    R1#conf t
    R1(config)#enable secret 12345678
    R1#end 
    R1#show running-config | include enable
\end{lstlisting}

Activar el servicio de encriptación
\begin{lstlisting}
    R1#conf t
    R1(config)#service password-encryption
    R1(config)#exit
    R1#show running-config | include pass
\end{lstlisting}

Ya hemos crado un password, el cual tiene como fin el cambio de privilegios, pordemos también poner un password para abrir la consola.
\begin{lstlisting}
    R1#conf t
    R1(config)#line console 0
    R1(config-line)#password 1234
    R1(config-line)#login 
    R1(config-line)#exit 
    R1(config)#exit
    R1#disable 
    R1enable //Pedirá password 
\end{lstlisting}

Quiero conexión remota de R2 a R1\\
Puerto telnet = 22, requerimos un password.
\begin{lstlisting}
    R2#telnet 10.10.0.1 //Requiere password y no la tenemos, entonces debemos configurar primero a donde nos vamos a conectar (añadir password a R1)
\end{lstlisting}

Configuramos password para telnet
\begin{lstlisting}
    R1#conf t
    R1(config)#line vty 0 15 //Accesos completos, cisco usa permisos de seguridad de 0 a 15 pero solo tenemos acceso a 3 
    R1(config)#password 1234
\end{lstlisting}

Intentamos de nuevo con R2 conectarnos
\begin{lstlisting}
    R2#telnet 10.10.0.1 //Ahora nos pedirá password, para nuestro caso es 1234, ahora estamos en R1
    R1
\end{lstlisting}

Configuración de SSL: tiene mayor nivel de seguridad. Podemos encriptar las tramas
\begin{lstlisting}
    R1disable
    R1show ssh //Esta desactivado
\end{lstlisting}

Asignando llave y dominio 
\begin{lstlisting}
    R1enable
    R1#conf t
    R1(config)#ip domain-name curso4CM1.com//Configuramos el dominio, este tiene relación lógica o práctica algo que nos vuelve comunes.
    R1(config)#crypto key generate rsa general-keys //Definimos una llave de encriptación
    How many bits in the modulus [512]: 1024 //Asignamos el tamaño de llave en este caso 1024 bytes
\end{lstlisting}

Tiempo de inactividad, se cae la conexión en n segundos 
\begin{lstlisting}
    R1(config)#ip ssh time-out 30 //En 30 segundos se cancela la conexión
\end{lstlisting}

Número de intentos si falla el password 
\begin{lstlisting}
    R1(config)#ip ssh authentication-retries 3 //A los 3 intentos se cancela la conexión 
\end{lstlisting}

Configuración versión de ssh 
\begin{lstlisting}
    R1(config)#ip ssh version 2
\end{lstlisting}

Privilegios 
\begin{lstlisting}
    R1(config)#username admin privilege 15 pass 1234 //Asignamos un nivel de privilegios 15 con el password 1234
\end{lstlisting}

\begin{lstlisting}
    R1(config)#line vty 0 4 //Modo de configuración de una terminal virtual (remota)
    R1(config-line)#transport input ssh //Me comunicaré usando SSH
    R1(config-line)#login local //Desde dónde haré la verificación de password, imaginemos que tenemos un server que tiene los controles de acceso. En este caso todo se hará localmente
\end{lstlisting}

Verificamos usando R2 que todo esté bien 
\begin{lstlisting}
    R2#ssh -v 2 -l admin 10.10.0.1 //En mi caso no pude especificar la versión por tanto removemos ese comando
    R2#ssh -l admin 10.10.0.1 //Me pedirá el password el cual es 1234 y ahora puedo acceder remotamente a R1
\end{lstlisting}
Verificamos si esta activo el SSH 
\begin{lstlisting}
    R1(config)#end 
    R1show ssh
\end{lstlisting}

Niveles de privilegio 
\begin{lstlisting}
    R1conf t
    R1(config)#privilege line//Definimos el conjunto de comando a asignar
\end{lstlisting}

\section{Enrutamiento estático y dinámico}
Estas tienen una diferencia: Recordemos en el ejemplo anterior hacíamos ping a R2 pero no teníamos respuesta. En enrutamiento dinámico cada router sabe que va ha hacer, si envian una petición sabe por que interfaz enviar una respuesta.\\
Nosotros como adminsitradores definimos un registro en la tabla de enrutamiento.

\begin{lstlisting}
    R1show ip route //Vemos tablas de enrutamiento del router  
\end{lstlisting}

Si el paquete no está en alguno de los renglones de la tabla de enrutamiento no envia nada el router.
